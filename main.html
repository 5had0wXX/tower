<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Tower Explorer</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBntMZhX8H1ZTnU6H3pG1M9hGv5o5IVm3t8QxLG0Y2ebGglSDhJ9Gz5f5jm5IY1h0z1W+uNkP1ZgNgR8sfw==" crossorigin=""/>
    <style>
        /* Cyberpunk blurred background */
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; font-family: 'Orbitron', sans-serif; }
        #bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: url('https://source.unsplash.com/1920x1080/?cyberpunk,city') no-repeat center/cover; filter: blur(8px) brightness(0.6); z-index: -1; }
        header { position: absolute; top: 0; left: 0; width: 100%; padding: 10px 20px; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: space-between; z-index: 10; }
        header h1 { margin: 0; font-size: 1.5rem; color: #00ffff; }
        nav button { margin-left: 10px; padding: 8px 12px; background: #111; border: 1px solid #00ffff; color: #00ffff; cursor: pointer; font-family: 'Share Tech Mono', monospace; }
        nav button:hover { background: #00ffff; color: #111; }
        #map { position: absolute; top: 50px; bottom: 0; width: 100%; }
        .section { display: none; position: absolute; top: 50px; bottom: 0; width: 100%; color: #fff; overflow-y: auto; padding: 20px; background: rgba(0,0,0,0.5); }
        .active { display: block; }
        .urbex-card { background: rgba(255,255,255,0.1); border: 1px solid #00ffff; padding: 15px; margin-bottom: 15px; border-radius: 8px; }
    </style>
</head>
<body>
    <div id="bg"></div>
    <header>
        <h1>3D Tower Explorer</h1>
        <nav>
            <button data-target="mapSection">Map</button>
            <button data-target="urbexSection">Urbex</button>
            <button onclick="window.open('https://discord.gg/BJCyeDF47A', '_blank')">Discord</button>
        </nav>
    </header>
    <!-- Map Section -->
    <div id="mapSection" class="section active">
        <div id="map"></div>
    </div>
    <!-- Urbex Section -->
    <div id="urbexSection" class="section">
        <h2>Urban Exploration Highlights</h2>
        <div class="urbex-card">
            <h3>Abandoned Factory, CT</h3>
            <p>Explore the rusted halls of this old manufacturing plant. Coordinates: 41.3000, -72.9000</p>
        </div>
        <div class="urbex-card">
            <h3>Decommissioned Bunker, RI</h3>
            <p>Hidden beneath the pine forest lies this Cold War relic. Coordinates: 41.8000, -71.5000</p>
        </div>
        <div class="urbex-card">
            <h3>Ghost Town, MA</h3>
            <p>Walking amongst empty streets and boarded windows. Coordinates: 42.3000, -72.5000</p>
        </div>
    </div>
    <!-- Leaflet & Three.js Scripts -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-1yXYHUpQ0cA3fa+2ghiGK+X8Op6hK/7LkT0/aAzM..." crossorigin=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://unpkg.com/leaflet-3d@0.1.0/leaflet-3d.js"></script>
    <script>
        // Section toggle
        document.querySelectorAll('nav button[data-target]').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                document.getElementById(btn.getAttribute('data-target')).classList.add('active');
            });
        });
        // Initialize Leaflet map
        var map = L.map('map').setView([41.7, -73.5], 9);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);
        // Tower data (sample, replace with full data)
        var towers = [
            { lat:41.4782, lon:-72.6966, height:365, name:'Durham Tower' },
            { lat:41.7881, lon:-71.9495, height:317, name:'Brooklyn Tower' },
            { lat:41.4802, lon:-72.1486, height:300, name:'Montville Tower' }
            // ...extend to 100 points
        ];
        // Add towers and 3D models
        towers.forEach(t => {
            L.marker([t.lat, t.lon]).addTo(map).bindPopup(`<b>${t.name}</b><br>Height: ${t.height} ft`);
            var geo = new THREE.CylinderGeometry(2,2,t.height,8);
            var mat = new THREE.MeshBasicMaterial({color:0xff0000});
            var mesh = new THREE.Mesh(geo, mat);
            var point = map.latLngToLayerPoint([t.lat, t.lon]);
            mesh.position.set(point.x, point.y, t.height/2);
            map._renderer.scene.add(mesh);
        });
    </script>
</body>
</html>
